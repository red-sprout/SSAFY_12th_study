# RealMySQL 8장 질문 리스트

- 데이터베이스에서 인덱스가 필요한 이유
    
    인덱스는 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조입니다. 주요 필요 이유는 다음과 같습니다:
    
    1. 검색 성능 향상
        - 인덱스가 없다면 특정 데이터를 찾기 위해 테이블 전체를 순차적으로 검색(Full Table Scan)해야 합니다
        - 인덱스를 사용하면 B-Tree 구조를 통해 원하는 데이터를 빠르게 찾을 수 있습니다
    2. 정렬 및 그룹화 연산 최적화
        - ORDER BY, GROUP BY 등의 작업을 수행할 때 이미 정렬된 인덱스를 활용하여 성능을 향상시킬 수 있습니다
    3. 데이터 무결성 보장
        - Primary Key, Unique 인덱스를 통해 데이터의 중복을 방지하고 무결성을 보장할 수 있습니다
- Index를 어떤 Column에 사용하는 것이 좋을까요
    
    인덱스는 다음과 같은 기준으로 컬럼을 선정하는 것이 좋습니다:
    
    1. WHERE 절에서 자주 사용되는 컬럼
        - 검색 조건으로 자주 사용되는 컬럼에 인덱스를 생성하면 검색 성능을 크게 향상시킬 수 있습니다
    2. 선택도(Selectivity)가 높은 컬럼
        - 데이터의 중복도가 낮은(고유한 값이 많은) 컬럼이 인덱스로 적합합니다
        - 예: 주민등록번호, 이메일 등
    3. JOIN에 자주 사용되는 컬럼
        - 외래 키로 사용되는 컬럼들은 JOIN 연산의 성능을 위해 인덱스를 고려해야 합니다
    4. ORDER BY, GROUP BY에 자주 사용되는 컬럼
        - 정렬이나 그룹화 작업이 자주 발생하는 컬럼에 인덱스를 생성하면 해당 작업의 성능을 개선할 수 있습니다
    
    단, 컬럼의 데이터 크기가 너무 큰 경우는 신중하게 고려해야 하며, 갱신이 빈번한 컬럼의 경우 인덱스 생성을 피하는 것이 좋습니다.
    
- 인덱스가 많을 때의 장단점은 무엇인가요?
    
    장점:
    
    1. 검색 성능 향상
        - 다양한 조건의 WHERE 절에 대해 빠른 검색이 가능합니다
        - 여러 조합의 검색 조건에 대응할 수 있습니다
    2. 정렬 작업 최적화
        - 다양한 정렬 조건에 대해 인덱스를 활용할 수 있습니다
    
    단점:
    
    1. 추가적인 저장 공간 필요
        - 각 인덱스마다 별도의 저장 공간이 필요합니다
        - 데이터베이스 크기가 증가합니다
    2. 데이터 변경 작업의 성능 저하
        - INSERT, UPDATE, DELETE 작업 시 모든 인덱스를 함께 수정해야 합니다
        - 인덱스가 많을수록 이러한 작업의 부하가 증가합니다
    3. 옵티마이저의 비효율적인 실행 계획 선택 가능성
        - 너무 많은 인덱스가 있으면 옵티마이저가 최적의 실행 계획을 선택하는 데 어려움을 겪을 수 있습니다
- InnoDB의 세컨더리 인덱스가 프라이머리 키를 통해 실제 데이터를 찾는 과정에 대해서 설명해주세요
    
    InnoDB에서 세컨더리 인덥스를 통한 데이터 검색 과정:
    
    1. 세컨더리 인덱스 검색
        - 검색 조건에 해당하는 세컨더리 인덱스 레코드를 찾습니다
        - 세컨더리 인덱스 레코드에는 해당 레코드의 프라이머리 키 값이 저장되어 있습니다
    2. 프라이머리 키를 이용한 클러스터링 인덱스 검색
        - 세컨더리 인덱스에서 찾은 프라이머리 키 값으로 클러스터링 인덱스를 검색합니다
        - 이 과정을 '인덱스 스캔'이라고 합니다
    3. 실제 데이터 접근
        - 클러스터링 인덱스에서 찾은 위치에서 실제 데이터를 읽어옵니다
    
    이러한 과정을 통해 InnoDB는 세컨더리 인덱스를 이용해 데이터를 찾을 때 항상 프라이머리 키를 통한 추가 검색이 필요합니다. 이를 '루즈 인덱스 스캔'이라고도 합니다.
    
- 클러스터링 인덱스와 논클러스터링 인덱스의 차이점과 각각의 장단점을 설명해주세요
    
    클러스터링 인덱스:
    
    - 테이블의 물리적 저장 순서를 인덱스의 순서와 동일하게 유지합니다
    - InnoDB의 경우 프라이머리 키가 클러스터링 인덱스가 됩니다
    - 장점:
        - 인덱스 검색 후 데이터를 찾을 때 추가적인 디스크 I/O가 적습니다
        - 범위 검색 성능이 우수합니다
    - 단점:
        - 물리적 순서를 유지해야 하므로 데이터 입력/수정 시 오버헤드가 발생합니다
        - 테이블당 하나만 생성 가능합니다
    
    논클러스터링 인덱스:
    
    - 데이터의 물리적 저장 순서와 인덱스의 순서가 다릅니다
    - 장점:
        - 여러 개의 인덱스를 생성할 수 있습니다
        - 데이터 입력/수정이 클러스터링 인덱스보다 빠릅니다
    - 단점:
        - 데이터를 찾을 때 추가적인 디스크 I/O가 필요할 수 있습니다
        - 범위 검색 시 성능이 클러스터링 인덱스보다 떨어질 수 있습니다