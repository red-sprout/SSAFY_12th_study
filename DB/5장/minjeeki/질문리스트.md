# 질문

## 1. 트랜잭션의 ACID 특성에 대해 설명해주세요.
    
    - Atomicity(원자성): 트랜잭션의 작업이 모두 반영되거나 전혀 반영되지 않아야 함
    - Consistency(일관성): 트랜잭션 전후에 데이터베이스가 일관된 상태를 유지해야 함
    - Isolation(격리성): 동시에 실행되는 트랜잭션들이 서로 영향을 미치지 않아야 함
    - Durability(지속성): 완료된 트랜잭션의 결과는 영구적으로 반영되어야 함
    
## 2. MySQL의 격리수준(Isolation Level)에 대해 설명해주세요.
    
    - READ UNCOMMITTED: 커밋되지 않은 데이터도 읽을 수 있음
    - READ COMMITTED: 커밋된 데이터만 읽을 수 있음
    - REPEATABLE READ: MySQL InnoDB의 기본 격리수준으로, 트랜잭션이 시작된 시점의 데이터를 일관되게 읽을 수 있음
    - SERIALIZABLE: 가장 엄격한 격리수준으로, 완벽한 읽기 일관성 제공
    
## 3. InnoDB의 락 종류에 대해 설명해주세요.
    
    1. 레코드 락: 레코드 자체를 잠그는 방식
    2. 갭 락: 레코드 사이의 간격을 잠그는 방식
    3. 넥스트 키 락: 레코드 락과 갭 락을 합친 형태
    4. 자동 증가 락: AUTO_INCREMENT 칼럼을 위한 테이블 수준의 락
    
    InnoDB는 특징적으로 레코드 기반의 락을 사용하며, 락 에스컬레이션이 없다
    
## 4. MySQL의 글로벌 락과 테이블 락의 차이점은 무엇인가요?
    
    글로벌 락:
    - MySQL 서버 전체에 영향
    - 주로 백업 용도로 사용
    - FLUSH TABLES WITH READ LOCK 명령어로 획득
    
    테이블 락:
    - 특정 테이블에만 영향
    - DML, DDL 작업 시 사용
    - LOCK TABLES 명령어로 획득
    - InnoDB는 대부분의 DML에서는 무시됨
    
## 5. 트랜잭션 내에서 네트워크 작업을 배제해야 하는 이유는 무엇인가요?
    
    트랜잭션 내에서 네트워크 작업을 수행하면 다음과 같은 문제가 발생할 수 있다
    
    - 네트워크 지연으로 인한 트랜잭션 시간 증가
    - 트랜잭션이 길어짐에 따른 DBMS 서버의 부하 증가
    - 커넥션 점유 시간 증가로 인한 커넥션 풀 고갈 가능성
    
    따라서 DBMS 서버의 부하를 방지하기 위해 네트워크 작업은 트랜잭션에서 제외해야 한다
    
## 6. 메타데이터락은 언제 사용되며 왜 필요한가요?
    
    메타데이터 락은 테이블의 구조나 정의를 변경할 때 사용된다.
    
    - 테이블 이름 변경
    - 칼럼 추가/삭제/변경
    - 인덱스 생성/삭제 등의 작업 시 필요
    - 이는 테이블 구조 변경 중에 다른 트랜잭션이 해당 테이블을 변경하는 것을 막아 데이터 정합성을 보장한다.
## 7. InnoDB에서 왜 락 에스컬레이션(Lock Escalation)이 발생하지 않나요?
    1. 레코드 기반의 잠금을 사용하며
    2. 잠금 정보가 매우 작은 공간으로 관리되기 때문이다.
    
    이로 인해 레코드 락이 테이블 락으로 확장될 필요가 없으며, 이는 더 좋은 동시성을 제공하는 장점이 있다
    
## 8. 인덱스와 잠금의 관계에 대해서 설명해주세요.
    
    InnoDB에서 인덱스와 잠금의 관계:
    
    1. 검색 조건에 사용하는 인덱스에 따라 잠금 범위가 달라짐
    2. 인덱스가 없는 경우 테이블 전체에 대한 잠금이 발생할 수 있음
    3. 레코드 락은 실제로 인덱스 레코드를 잠금
    4. 적절한 인덱스 사용으로 잠금 범위를 최소화할 수 있음
## 9. 트랜잭션과 잠금의 차이점을 설명해주고 둘의 관계를 설명해주세요
    1. 개념적 차이
        - 트랜잭션: 데이터베이스의 논리적인 작업 단위
        예) 계좌이체 시 출금과 입금을 하나의 작업으로 처리
        - 잠금: 동시성을 제어하기 위한 기능
        예) 여러 사용자가 동시에 같은 데이터를 수정하는 것을 방지
    2. 목적의 차이
        - 트랜잭션: 데이터의 정합성과 일관성 보장
        - 잠금: 동시성 제어와 데이터 무결성 보장
    3. 둘의 관계
        - 트랜잭션은 잠금을 사용하여 동시성을 제어
        - 하나의 트랜잭션은 여러 개의 잠금을 가질 수 있음
        - 잠금은 트랜잭션의 격리성(Isolation)을 보장하는 중요한 역할 수행
    4. 실제 사용 예시
    트랜잭션 내에서 UPDATE 문을 실행하면:
        - 트랜잭션: 작업의 원자성을 보장
        - 잠금: 다른 트랜잭션이 해당 데이터를 수정하지 못하도록 제어
## 10. 데드락(Deadlock)이 무엇이며, 이를 해결하고 방지하는 방법에 대해 설명해주세요.
    
    데드락은 두 개 이상의 트랜잭션이 서로의 락을 기다리며 무한 대기 상태에 빠지는 현상이다.
    
    해결 및 방지 방법:
    
    1. 트랜잭션이 테이블을 접근하는 순서를 동일하게 유지
    2. 트랜잭션의 범위를 최소화
    3. 트랜잭션 내에서 되도록 동일한 순서로 데이터에 접근
    4. Lock Timeout 설정
    
    실제 발생 시 해결 방법:
    
    1. SHOW ENGINE INNODB STATUS로 데드락 감지
    2. 트랜잭션의 일부를 강제 종료하여 데드락 해제