

## 1. 데이터 압축의 필요성과 이를 통해 얻을 수 있는 이점은 무엇인가요?

**필요성**  
- 데이터 크기가 클수록 쿼리 처리 성능, 백업 및 복구 시간, 디스크 사용량에 부정적인 영향을 미칩니다.  
- 데이터 압축은 이러한 문제를 완화하여 저장 효율성을 높이고 성능을 개선합니다.

**이점**  
1. **디스크 공간 절약**: 데이터 크기를 줄여 저장 비용 절감.  
   - *예시*: 로그 데이터 압축으로 50~70%의 공간 절약 가능.  
2. **백업 및 복구 시간 단축**: 전송량 감소로 백업/복구 속도 개선.  
3. **비용 효율성**: 클라우드 저장 비용 절감 효과.

---

## 2. 테이블 압축과 페이지 압축의 차이점은 무엇인가요?

**페이지 압축**  
- 디스크에 데이터 페이지를 저장할 때 압축 적용.  
- **운영체제 및 하드웨어 제약**: 펀치 홀 기능을 지원해야 사용 가능.  

**장점**  
- 디스크 공간 절약.  

**단점**  
- 제한적인 운영체제 및 하드웨어 지원으로 활용도가 낮음.

**테이블 압축**  
- 테이블 생성 시 `ROW_FORMAT=COMPRESSED`와 `KEY_BLOCK_SIZE` 옵션 사용.  
- **제약 없음**: 운영체제 및 하드웨어 제약 없이 사용 가능.  

**장점**  
- 활용도가 높고 데이터 효율성이 우수.  

**단점**  
- 데이터 변경이 잦을 경우 성능 저하 및 압축률 감소.

---

## 3. InnoDB에서 테이블 압축을 사용할 때, 압축 실패율과 관련된 설정과 고려사항은 무엇인가요?

**압축 실패율**  
- 목표 크기(`KEY_BLOCK_SIZE`)보다 압축 결과가 크면 압축이 실패한 것으로 간주됩니다.  

**관련 설정**  
1. `KEY_BLOCK_SIZE`: 압축 목표 크기를 설정.  
   - *예시*: 16KB 페이지를 8KB로 압축.  
2. 관련 시스템 변수  
   - `innodb_compression_failure_threshold_pct`: 압축 실패율 허용 범위 설정.  
   - `innodb_compression_pad_pct_max`: 압축 실패 시 추가 패딩 비율 설정.

**고려사항**  
1. 로그 데이터처럼 변경이 적은 데이터는 실패율이 높아도 압축을 사용.  
2. 업데이트가 빈번한 데이터는 압축 사용을 지양.  
   - *예시*: 주문 데이터와 같이 자주 변경되는 데이터는 압축 시 성능 저하 발생.

---

## 4. 데이터 압축의 단점과 이를 보완하기 위한 InnoDB의 Adaptive 알고리즘은 무엇인가요?

**단점**  
1. CPU 사용량 증가: 압축 및 해제 작업에서 리소스 소모.  
2. 메모리 낭비: 압축된 페이지와 해제된 페이지를 모두 유지.

**보완책: Adaptive 알고리즘**  
- 요청 패턴에 따라 압축 및 압축 해제 작업을 조정.  
- **디스크 IO 사용량이 많으면**: LRU 리스트 유지로 메모리 확보.  
- **CPU 사용량이 많으면**: Unzip_LRU 리스트 유지로 압축/해제 최소화.

**예시**  
- 압축된 데이터를 자주 읽는 경우 Unzip_LRU 리스트를 유지하여 성능 최적화.

---

## 5. MySQL TDE(Transparent Data Encryption)란 무엇이며, 어떤 방식으로 데이터를 암호화하나요?

**TDE 정의**  
- 디스크에 데이터를 읽고 쓰는 시점에 암호화 및 복호화를 수행.  
- 사용자에게는 투명하게 처리되며 보안성을 강화.

**암호화 방식**  
1. **테이블스페이스 키 발급**: 테이블별 고유 암호화 키 생성.  
2. **마스터 키 암호화**: 테이블스페이스 키를 마스터 키로 암호화.  
3. 데이터를 저장 시 테이블스페이스 키로 암호화.  
4. 데이터를 읽을 때 복호화 후 InnoDB 버퍼 풀에 저장.

**예시**  
- 금융 서비스에서 민감 데이터를 암호화하여 저장.

---

## 6. MySQL의 2단계 키 관리 방식은 무엇이며, 왜 중요한가요?

**2단계 키 관리 방식**  
1. **마스터 키**: 테이블스페이스 키 암호화.  
2. **테이블스페이스 키**: 데이터를 암호화.  

**중요성**  
- 마스터 키는 주기적으로 교체 가능.  
- 테이블스페이스 키는 안정적으로 유지되어 암호화 효율성을 보장.  
- *예시*: 주기적으로 `ALTER INSTANCE ROTATE INNODB MASTER KEY`로 마스터 키 교체.

---

## 7. TDE와 응용 프로그램 암호화의 차이점은 무엇인가요?

**TDE(서버 암호화)**  
- 데이터베이스 서버에서 암호화.  
- **장점**: 인덱스와 정렬 기능 사용 가능.  

**응용 프로그램 암호화**  
- 데이터베이스로 보내기 전에 데이터를 암호화.  
- **단점**: 암호화된 데이터를 기준으로 정렬하거나 인덱스를 활용하기 어려움.  

**예시**  
- TDE는 서버 보안을 강화하고, 응용 프로그램 암호화는 사용자 권한 관리와 세부 제어에 유리.

---

## 8. MySQL에서 테이블 암호화를 설정하는 방법은 무엇인가요?

**개별 테이블 암호화**  
- 테이블 생성 시 `ENCRYPTION='Y'` 옵션을 추가.  
```sql
CREATE TABLE encrypted_table (
    id INT PRIMARY KEY,
    data VARCHAR(100)
) ENCRYPTION='Y';
```

**전체 테이블 암호화**  
- `default_table_encryption=ON` 설정으로 새 테이블에 암호화를 기본 적용.

---

## 9. 데이터 암호화와 데이터 압축이 동시에 적용될 경우 어떤 순서로 처리되나요? 이유는 무엇인가요?

**처리 순서**  
1. 압축 → 2. 암호화.  

**이유**  
- 암호화된 데이터는 랜덤 바이트 배열로 변환되므로 압축률이 크게 저하.  
- 압축을 먼저 수행하면 저장 공간을 더 효율적으로 활용 가능.

**예시**  
- 로그 데이터를 압축 후 암호화하면 저장 공간 절약과 보안성 강화 가능.

---

## 10. 암호화된 테이블과 압축된 테이블을 함께 사용할 때 발생할 수 있는 성능 이슈는 무엇인가요?

**성능 이슈**  
1. 압축된 데이터를 복호화하거나 암호화된 데이터를 압축 시 CPU 리소스 소모.  
2. 암호화된 데이터는 랜덤 바이트 배열로 압축률이 저하.

**해결 방안**  
- 빈번한 읽기와 쓰기가 발생하는 경우 암호화와 압축 적용 최소화.  
- 데이터 사용 패턴 분석 후 선택적으로 적용.  

**예시**  
- 금융 데이터는 암호화 중심으로 처리.  
- 로그 데이터는 압축 중심으로 설정.
